<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>60+ Tech</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap">
  <link rel="stylesheet" href="./css/styles-index.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
</head>
<body>
  <header>
    <nav class="navbar">
      <div class="logo">
        <img src="../img/logo.png" alt="Logo 60+ Tech">
      </div>
      <span class="detalhe-01"></span>
      <span class="detalhe-02"></span>
      <ul class="nav-menu">
        <li class="nav-item"><a href="#home" class="nav-link">Home</a></li>
        <li class="nav-item"><a href="./sobre-nos.html" class="nav-link">Sobre nós</a></li>
        <li class="nav-item" id="login" ><a href="/login-page/login-page.html"  class="nav-link">Login</a></li>
        <li class="nav-item"><a href="/src/pages/registration page/registration page.html" class="other-1" class="nav-link">Registrar-se</a></li>
      </ul>
      <div class="hamburger">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </div>
    </nav>
  </header>
  <div class="background">
    <div class="img-background">
    </div>
    <div class="content">
      <h1>60+ TECH</h1>
      <div class="form">
        <input type="email" placeholder="Digite seu email..." style="font-size: 1em">
        <button><a style="text-decoration: none; color: black; font-size: large;" href="./registration page/registration page.html">Cadastre-se</a></button>
      </div>
    </div>
  </div>
  <main>
    <section id="servicos">
      <div class="servico">
        <button class="main-btn"><span class="material-symbols-outlined tutorial">
            subscriptions
          </span><a href="/tutoriais/tutoriais.html" class="no-underline">Tutoriais </a></button>
        <div class="descricao">
          <span class="main-detalhe-01"></span>
          <div class="box">
            <p>Explore nossos tutoriais detalhados e fáceis de seguir para aprender a usar as redes sociais e navegar na internet com confiança!</p>
          </div>
        </div>
        <img src="../img/tutoriais.jpg" alt="Tutoriais">
      </div>
      <div class="servico">
        <button class="main-btn"><span class="material-symbols-outlined medicamento">
            medical_services
          </span><a href="/medicamentos/meus-remedios.html" class="no-underline">Medicamentos </a></button>
        <div class="descricao">
          <span class="main-detalhe-02"></span>
          <div class="box">
            <p>Organize seus medicamentos de forma simples e eficiente e receba alertas personalizados para não esquecer nenhum horário!</p>
          </div>
          <img src="../img/medicamentos.jpg" alt="Medicamentos">
        </div>
      </div>
      <div class="servico">
        <button class="main-btn"><span class="material-symbols-outlined seguranca">
            verified_user
          </span></span><a href="/seguranca/dicas-segurança.html" class="no-underline">Segurança </a> </button>
        <div class="descricao">
          <span class="main-detalhe-03"></span>
          <div class="box">
            <p>Explore nossas dicas de segurança para não cair em golpes e estar sempre atento aos conteúdos compartilhados!</p>
          </div>
          <img src="../img/dicas de seguranca.jpg" alt="Dicas de Segurança">
        </div>
      </div>
    </section>
    <div class="descricao">
      <div class="box dicas">
        <div class="dicas">
          <h2>Dica do Dia</h2>
          <div class="video">
            <p>Descubra como reconhecer golpes virtuais e proteja-se contra fraudes online!</p>
            <a href="#" id="random-link">VEJA MAIS! -></a>
            <iframe src="https://www.youtube.com/embed/n7-48nJXtr8?si=gkvZhme6dkJS_-2o" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen>
              
            </iframe>
          </div>
        </div>
      </div>
    </div>
    <button class="main-btn" style="width:100%;background-color:#24aeda" ><a href="/dicas-do-dia/conselhos.html">BONÛS: Conselhos do dia !!! </a></button>

  </main>
  <footer>
    <nav>
      <ul>
        <li><a class="contato" href=""><span class="material-icons orange">phone</span> Contato: </a></li>
        <li><a class="email" href=""><span class="material-symbols-outlined mail">mail</span> 60+tech@gmail.com</a></li>
        <li><a class="githubLink" href="https://github.com/ICEI-PUC-Minas-PMV-SI/pmv-si-2024-1-pe1-t5-60tech" target="_blank"> <i class="fa fa-github" style="font-size:28px;color:#ECAE2A"></i> GitHub do projeto</a></li>
      </ul>
    </nav>
    <p class="copyright"> 2024 60+ TECH - Todos Direitos Reservados <span class="material-icons md-18 orange">copyright</span></p>
  </footer>
  <button id="open-popup-btn" class="open-popup-btn">Seus Remédios</button>

 
      <button id="select-date-btn">Selecionar</button>
  </div>
  
  <div id="popup" class="popup">
    <div class="popup-content">
        <p>Seus remédios</p>
      <table>
        <thead>
          <tr>
            <th>NOME :</th>
            <th>QUANTIDADE :</th>
            <th>HORÁRIO :</th>
            <th>OBSERVAÇÕES:</th>
          </tr>
        </thead>
        <tbody id="medicamentos">
          <!-- Linhas da tabela serão inseridas aqui -->
        </tbody>
      </table>
        <button class="popup-btn" onclick="closePopup()">Ok, Fechar</button>
    </div>
  </div>
  <script src="dicas.js"></script>
  <script src="popup.js"></script>
  <script src="menu.js"></script>
  <script src="./medicamentos/medicamentos.js"></script>
  <script>
    function exibe() {
      // Popula a tabela com os registros do banco de dados
      fetch(apiUrl)
        .then((response) => {
          console.log("Resposta da API:", response);
          if (!response.ok) {
            throw new Error("Erro ao buscar dados da API");
          }
          return response.json();
        })
        .then((data) => {
          // Limpa o conteúdo atual da tabela
          document.getElementById("medicamentos").innerHTML = "";

          // Obtém o usuário corrente
          const usuarioCorrente = JSON.parse(
            sessionStorage.getItem("usuarioCorrente"),
          );
          // Filtra os medicamentos com base no userId
          const medicamentosDoUsuario = data.filter(
            (medicamento) => medicamento.user_id === usuarioCorrente.id,
          );

          // Itera sobre os dados dos medicamentos do usuário e cria linhas na tabela para cada um
          medicamentosDoUsuario.forEach((medicamento) => {
            const tr = document.createElement("tr");
            tr.innerHTML = `
                <td>${medicamento.nome}</td>
                <td>${medicamento.quantidade}</td>
                <td>${medicamento.horario}</td>
                <td>${medicamento.observacao || " - "}</td> <!-- Verifica se observacoes está definido, se não, usa uma string vazia -->
              `;
            document.getElementById("medicamentos").appendChild(tr);
          });
          showPopup(); 
        })
        .catch((error) => {
          console.error(
            "Erro ao ler medicamentos via API JSONServer:",
            error,
          );
          alert("Erro ao buscar dados dos medicamentos");
        });
    }
    function initPage() {
      // PARTE 1 - INICIALIZA USUARIOCORRENTE A PARTIR DE DADOS NO LOCAL STORAGE, CASO EXISTA
      const usuarioCorrente = JSON.parse(
        sessionStorage.getItem("usuarioCorrente"),
      );
      if (!usuarioCorrente) {
        document.getElementById('login').innerHTML = '<a href="/login-page/login-page.html"  class="nav-link">Login</a>';
      }
      document.getElementById('login').innerHTML = '<a href="/usuario/perfil.html" class="nav-link">Meu Perfil</a>';
      
      document.getElementById("open-popup-btn").addEventListener("click", exibe);
    }

    window.addEventListener("load", initPage);

  </script>
</body>

</html>